Object.defineProperty(exports, '__esModule', { value: true });

var node_path = require('node:path');
var plugin = require('tailwindcss/plugin');

function _interopDefault (e) { return e && e.__esModule ? e : { default: e }; }

var plugin__default = /*#__PURE__*/_interopDefault(plugin);

/**
 * Add more here when additional UI packages are added
 */ const PACKAGES = [
    "react",
    "solid",
    "svelte",
    "vue"
];
function withUt(twConfig) {
    const contentPaths = PACKAGES.map((pkg)=>{
        try {
            const resolved = require.resolve(`@uploadthing/${pkg}`);
            return resolved.split(node_path.sep).slice(0, -1).join(node_path.sep) + `${node_path.sep}**`;
        } catch  {
            return null;
        }
    }).filter(Boolean);
    if (Array.isArray(twConfig.content)) {
        twConfig.content.push(...contentPaths);
    } else {
        // content can be an object too with `files` property
        twConfig.content.files.push(...contentPaths);
    }
    const utPlugin = plugin__default.default(({ addVariant })=>{
        // Variants to select specific underlying element
        addVariant("ut-button", '&>*[data-ut-element="button"]');
        addVariant("ut-allowed-content", '&>*[data-ut-element="allowed-content"]');
        addVariant("ut-label", '&>*[data-ut-element="label"]');
        addVariant("ut-upload-icon", '&>*[data-ut-element="upload-icon"]');
        addVariant("ut-clear-btn", '&>*[data-ut-element="clear-btn"]');
        // Variants to select specific state
        addVariant("ut-readying", '&[data-state="readying"]');
        addVariant("ut-ready", '&[data-state="ready"]');
        addVariant("ut-uploading", '&[data-state="uploading"]');
    });
    if (!twConfig.plugins) {
        twConfig.plugins = [];
    }
    twConfig.plugins.push(utPlugin);
    return twConfig;
}

exports.withUt = withUt;
